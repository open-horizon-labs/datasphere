{"id":"rl-03zy","title":"Add file ingestion support (engram add <file>)","description":"Allow engram to ingest text files directly without LLM distillation.\n\nKey changes:\n- Generalize processed table (source_id, source_type, node_ids)\n- Add SourceType::File\n- Add process_file function (chunk, embed, store)\n- Add 'engram add <file>' CLI command\n- SimHash for change detection","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T13:30:14.360644Z","updated_at":"2026-01-07T13:48:17.624299Z","closed_at":"2026-01-07T13:48:17.624299Z","blocks":[],"blocked_by":[]}
{"id":"rl-0etb","title":"Preserve FIFO order when re-queuing failed batch submissions","description":"CR #3: Failed requests are pushed to end of queue, breaking FIFO. Insert at front in reverse order to preserve original ordering.","status":"in_progress","priority":1,"issue_type":"task","session_id":"2822414","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:42.994108Z","updated_at":"2026-01-11T00:39:18.171939189Z","blocks":[],"blocked_by":[]}
{"id":"rl-1tt7","title":"Node and edge types (Rust structs)","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Simplified model: Node(id, content, source, source_type, timestamp, embedding[3072], confidence, metadata). Edge(id, source_node, target_node, weight, created_at, metadata). No node types, no edge types.","created_at":"2026-01-06T19:46:15.822393Z"}],"created_at":"2026-01-06T19:35:34.505086Z","updated_at":"2026-01-06T19:56:35.746409Z","closed_at":"2026-01-06T19:56:35.746409Z","blocks":["rl-8dqi"],"blocked_by":[]}
{"id":"rl-21ek","title":"Add batch state persistence for pending batches","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T17:51:17.420462Z","updated_at":"2026-01-10T19:32:19.707948Z","closed_at":"2026-01-10T19:32:19.707948Z","blocks":[],"blocked_by":[]}
{"id":"rl-29tt","title":"Add processed table to LanceDB store","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T21:47:02.431637Z","updated_at":"2026-01-06T21:50:45.995663Z","closed_at":"2026-01-06T21:50:45.995663Z","blocks":["rl-c865"],"blocked_by":["rl-8dqi"]}
{"id":"rl-31p3","title":"Remove edge infrastructure","description":"Remove Edge struct, edges table, link_node(), edge cleanup code. Simplify to pure vector search.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:40:00.367282Z","updated_at":"2026-01-07T19:47:20.850367Z","closed_at":"2026-01-07T19:47:20.850367Z","blocks":[],"blocked_by":[]}
{"id":"rl-3jb6","title":"Add status check in fetch_results_static","description":"CR #10: fetch_results_static() doesn't check response.status(), so error responses become parse errors. Check is_success() before parsing.","status":"closed","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.274246Z","updated_at":"2026-01-11T09:54:55.461891955Z","closed_at":"2026-01-11T09:54:55.461891955Z","blocks":[],"blocked_by":[]}
{"id":"rl-48xq","title":"Incremental chunk processing with per-chunk simhash","description":"1. Increase chunk sizes (CHUNK_THRESHOLD_TOKENS: 12K→50K, MAX_CHUNK_TOKENS: 10K→40K). 2. Store simhash per chunk instead of per session. 3. On re-process: compare chunk simhashes, only distill changed/new chunks. 4. Keep existing nodes for unchanged chunks. Semchunk recomputes boundaries - if different, it's different, reprocess.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Decided on 40K max chunk size. CHUNK_THRESHOLD_TOKENS: 50K, MAX_CHUNK_TOKENS: 40K. Can tune later based on usage.","created_at":"2026-01-10T19:32:05.547591Z"}],"created_at":"2026-01-10T19:28:39.329019Z","updated_at":"2026-01-10T20:21:35.972545Z","closed_at":"2026-01-10T20:21:35.972545Z","blocks":["rl-f6u5"],"blocked_by":[]}
{"id":"rl-4n11","title":"Integrate batch queue into daemon main loop with background poller","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T17:51:17.415362Z","updated_at":"2026-01-10T19:32:19.702099Z","closed_at":"2026-01-10T19:32:19.702099Z","blocks":[],"blocked_by":[]}
{"id":"rl-5bgi","title":"GA4: Use distinct client_id vs user_id for Measurement Protocol","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T20:41:51.294715Z","updated_at":"2026-01-08T20:38:58.774449Z","closed_at":"2026-01-08T20:38:58.774449Z","blocks":[],"blocked_by":[]}
{"id":"rl-5h21","title":"Embedding generation (OpenAI API)","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Use OpenAI text-embedding-3-large (3072 dims). High quality embeddings for semantic similarity.","created_at":"2026-01-06T19:46:15.924595Z"},{"author":"anonymous","text":"Design: text-embedding-3-large (3072 dims). OpenAI API.","created_at":"2026-01-06T21:44:01.227457Z"}],"created_at":"2026-01-06T19:35:34.755178Z","updated_at":"2026-01-06T22:43:24.024913Z","closed_at":"2026-01-06T22:43:24.024913Z","blocks":["rl-x4bk"],"blocked_by":[]}
{"id":"rl-5y4e","title":"CLI: ds queue retry to requeue failed jobs","description":"Add CLI command to requeue failed jobs. 'ds queue retry' requeues all failed, 'ds queue retry <id>' requeues specific job. Moves job from Failed → Pending status.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-09T08:46:06.749118Z","updated_at":"2026-01-09T20:59:08.313704716Z","closed_at":"2026-01-09T20:59:08.313704716Z","blocks":[],"blocked_by":[]}
{"id":"rl-64y9","title":"Semantic similarity linking (cosine on embeddings)","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Threshold 0.6 for serendipity. Create edges for any pair with cosine similarity > 0.6, weight = similarity score.","created_at":"2026-01-06T19:46:16.027533Z"}],"created_at":"2026-01-06T19:35:34.863137Z","updated_at":"2026-01-07T18:45:26.038369Z","closed_at":"2026-01-07T18:45:26.038369Z","blocks":["rl-oz4k"],"blocked_by":["rl-x4bk"]}
{"id":"rl-65h7","title":"Defer destructive writes until distillation succeeds","description":"CR #16: Orphaned nodes and Processed records are deleted BEFORE new chunks are distilled. If shutdown/rate-limit occurs mid-run, data is lost. Collect orphaned IDs, delete only after successful insert.","status":"open","priority":0,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:22.570904Z","updated_at":"2026-01-10T23:20:02.013017Z","blocks":[],"blocked_by":[]}
{"id":"rl-7m1j","title":"Discover Claude session transcript location","description":"","status":"closed","priority":2,"issue_type":"spike","labels":[],"comments":[{"author":"anonymous","text":"FINDINGS:\n- Location: ~/.claude/projects/<project-path>/<session-id>.jsonl\n- Project path: slashes replaced with dashes (e.g., /Users/drazen/foo → -Users-drazen-foo)\n- Session ID: UUID v4\n- Format: JSON Lines\n\nMessage types:\n- summary: Session summary (at start of file, has 'summary' field)\n- user: User messages (isMeta=false for actual user input)\n- assistant: Claude responses (message.content is array of text/tool_use)\n- file-history-snapshot: Internal bookkeeping (ignore)\n\nKey fields: type, uuid, parentUuid, timestamp, sessionId, message.role, message.content\n\nFor distillation: filter type=user (isMeta=false) and type=assistant","created_at":"2026-01-07T18:42:34.830699Z"}],"created_at":"2026-01-06T19:35:34.631358Z","updated_at":"2026-01-07T18:42:34.830702Z","closed_at":"2026-01-06T21:24:45.928636Z","blocks":["rl-mela"],"blocked_by":[]}
{"id":"rl-8dqi","title":"LanceDB integration","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T19:35:34.509764Z","updated_at":"2026-01-06T21:47:08.329651Z","closed_at":"2026-01-06T20:56:19.505207Z","blocks":["rl-roh8","rl-29tt"],"blocked_by":["rl-1tt7"]}
{"id":"rl-95vy","title":"Fix cost calculation for cached tokens","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T18:20:00.157802Z","updated_at":"2026-01-10T18:31:10.005418Z","closed_at":"2026-01-10T18:31:10.005418Z","blocks":[],"blocked_by":[]}
{"id":"rl-99nv","title":"Add prompt caching to Anthropic API calls in llm.rs","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T17:51:17.400461Z","updated_at":"2026-01-10T17:53:21.279893Z","closed_at":"2026-01-10T17:53:21.279893Z","blocks":[],"blocked_by":[]}
{"id":"rl-9ilo","title":"Spike sqlite-vec as LanceDB alternative","description":"## Context\n\nLanceDB pulls in massive dependencies:\n- 2486 deps with defaults\n- 2050 deps with default-features = false (removes AWS/GCS/Azure)\n- DataFusion (~1500 deps) is unavoidable - it's the query execution engine\n\n## Alternative: sqlite-vec\n\n- 29 deps (sqlite-vec + rusqlite)\n- Pure SQLite extension, runs anywhere\n- Supports cosine distance: distance_metric=cosine\n- Full SQL filtering via WHERE clauses\n- Pre-v1 alpha status (risk: breaking changes)\n\n## Spike Goals\n\n1. Implement Store trait with sqlite-vec backend\n2. Verify feature parity:\n   - Vector search (cosine, 1536 dims)\n   - Scalar filtering (source_id, namespace)\n   - CRUD operations\n   - Schema migrations\n3. Benchmark: query latency, insert throughput\n4. Assess API stability risk\n\n## References\n\n- https://github.com/asg017/sqlite-vec\n- https://alexgarcia.xyz/sqlite-vec/features/knn.html\n- Rust crate: sqlite-vec 0.1.7-alpha.2","status":"open","priority":2,"issue_type":"spike","labels":[],"comments":[],"created_at":"2026-01-10T00:22:50.223088Z","updated_at":"2026-01-10T00:22:50.223088Z","blocks":[],"blocked_by":[]}
{"id":"rl-a1g1","title":"GA4: Use distinct client_id instead of reusing user_id","description":"**Problem:**\nIn trackServerEvent, both client_id and user_id are set to the same wallet address.\n\nGA4 expects client_id to be a device/browser identifier, not a user identifier. Using the same value for both may cause inflated unique user counts and incorrect session attribution.\n\n**Solution:**\nFor server-side events, use a stable device/session identifier:\n- Option A: Hash of the session token\n- Option B: Generate and store a UUID per session  \n- Option C: Use the request's existing GA client cookie if available\n\n**Reference:**\nhttps://developers.google.com/analytics/devguides/collection/protocol/ga4/reference#payload_post_body","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-09T00:42:37.391363Z","updated_at":"2026-01-09T08:39:59.693805Z","closed_at":"2026-01-09T08:39:59.693805Z","blocks":[],"blocked_by":[]}
{"id":"rl-atzo","title":"Escape single quotes in LanceDB filter strings","description":"CR #19: source, id params interpolated into SQL filters without escaping. Paths with quotes break/exploit queries. Use value.replace('\\'', \"''\") in get_processed, get_node, delete_node, get_nodes_by_source.","status":"open","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.735411Z","updated_at":"2026-01-10T23:20:02.074020Z","blocks":[],"blocked_by":[]}
{"id":"rl-audy","title":"Add engram query CLI and MCP server","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:04:17.850353Z","updated_at":"2026-01-07T19:12:52.154640Z","closed_at":"2026-01-07T19:12:52.154640Z","blocks":[],"blocked_by":[]}
{"id":"rl-bkbh","title":"CLI: engram scan --limit for one-shot distillation","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T23:00:59.033815Z","updated_at":"2026-01-06T23:34:36.028602Z","closed_at":"2026-01-06T23:34:36.028602Z","blocks":[],"blocked_by":[]}
{"id":"rl-bok5","title":"Create batch.rs module with BatchQueue and Anthropic batch API client","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T17:51:17.405980Z","updated_at":"2026-01-10T17:55:46.005776Z","closed_at":"2026-01-10T17:55:46.005776Z","blocks":[],"blocked_by":[]}
{"id":"rl-c4c1","title":"Add engram related CLI command","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:41:13.732073Z","updated_at":"2026-01-07T19:52:23.406656Z","closed_at":"2026-01-07T19:52:23.406656Z","blocks":[],"blocked_by":[]}
{"id":"rl-c5p4","title":"Update batch model IDs to match Anthropic specs","description":"CR #13: Model IDs use claude-*-4-5 but Anthropic uses date snapshots like claude-sonnet-4-20250514. Align with real-time resolver in llm.rs.","status":"closed","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.357105Z","updated_at":"2026-01-11T09:54:55.457081478Z","closed_at":"2026-01-11T09:54:55.457081478Z","blocks":[],"blocked_by":[]}
{"id":"rl-c865","title":"Queue jobs for new/changed transcripts","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Design update: Process at-rest sessions only. Idle detection (5-10+ min unchanged) OR precompact hook trigger. Copy file before processing. Key on transcript file hash.","created_at":"2026-01-06T21:43:48.102473Z"}],"created_at":"2026-01-06T19:35:34.639997Z","updated_at":"2026-01-07T18:48:17.264181Z","closed_at":"2026-01-07T18:48:17.264181Z","blocks":[],"blocked_by":["rl-mela","rl-gley","rl-29tt"]}
{"id":"rl-dcao","title":"Parse LLM response into nodes","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T19:35:34.750506Z","updated_at":"2026-01-06T22:09:39.878841Z","closed_at":"2026-01-06T22:09:39.878841Z","blocks":["rl-x4bk"],"blocked_by":["rl-e6ed"]}
{"id":"rl-e6ed","title":"LLM extraction prompt for tacit knowledge","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Use Claude CLI (not HTTP API). Shell out to claude command.","created_at":"2026-01-06T19:46:16.125627Z"},{"author":"anonymous","text":"Design: Use Claude CLI (claude -p) not HTTP API. Consistent with wm/sg.","created_at":"2026-01-06T21:44:01.111858Z"}],"created_at":"2026-01-06T19:35:34.745112Z","updated_at":"2026-01-06T22:03:26.680364Z","closed_at":"2026-01-06T22:03:26.680364Z","blocks":["rl-dcao"],"blocked_by":[]}
{"id":"rl-e9cr","title":"Add timing to distill progress and remove linking","description":"Add duration reporting for LLM and embedding calls. Remove edge/linking code since edges are removed.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:56:15.698293Z","updated_at":"2026-01-07T20:05:42.159183Z","closed_at":"2026-01-07T20:05:42.159183Z","blocks":[],"blocked_by":[]}
{"id":"rl-f6u5","title":"Batch-always: remove real-time distillation path","description":"Simplify to always use batch API for distillation. Remove DistillMode::RealTime, remove parallel chunk processing code. All sessions go to batch queue. 50% cost savings on all distillation. Depends on: rl-ladr (batch chunking), rl-48xq (incremental chunks).","status":"open","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T19:29:55.265081Z","updated_at":"2026-01-10T19:32:34.224234Z","blocks":[],"blocked_by":["rl-ladr","rl-48xq"]}
{"id":"rl-f7w7","title":"Fix poll_pending() to preserve batch state on transient errors","description":"CR #9: poll_pending() drains pending_batches then uses ? on errors, losing all state. Keep batches on per-batch errors, only remove on success. Also fix response.status() == 404 to use StatusCode::NOT_FOUND.","status":"in_progress","priority":0,"issue_type":"task","session_id":"2947927","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:22.398753Z","updated_at":"2026-01-11T10:10:05.792925754Z","blocks":[],"blocked_by":[]}
{"id":"rl-fqg0","title":"Fix submit() to not lose requests on network error","description":"CR #8: submit() drains requests before awaiting API response. Clone requests first, only drain after 2xx success. Network errors currently drop drained requests.","status":"closed","priority":0,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:22.314471Z","updated_at":"2026-01-11T09:54:55.466504799Z","closed_at":"2026-01-11T09:54:55.466504799Z","blocks":[],"blocked_by":[]}
{"id":"rl-fyki","title":"Fix simhash persistence for batch-queued sessions","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T18:20:00.152682Z","updated_at":"2026-01-10T18:31:05.974274Z","closed_at":"2026-01-10T18:31:05.974274Z","blocks":[],"blocked_by":[]}
{"id":"rl-g158","title":"CLI: engram start --limit for daemon with transcript limit","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T22:57:55.190048Z","updated_at":"2026-01-06T23:34:36.033583Z","closed_at":"2026-01-06T23:34:36.033583Z","blocks":[],"blocked_by":[]}
{"id":"rl-g8tx","title":"Daemon: watch all projects with explicit queue","description":"engram start watches ~/.claude/projects/ recursively, queues jobs in ~/.engram/queue.jsonl, processes serially with rate limiting. Add engram queue command for introspection.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T18:52:31.148677Z","updated_at":"2026-01-07T19:00:53.204855Z","closed_at":"2026-01-07T19:00:53.204855Z","blocks":[],"blocked_by":[]}
{"id":"rl-gley","title":"Precompact hook CLI: engram precompact","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T21:43:53.189979Z","updated_at":"2026-01-07T17:32:53.053035Z","closed_at":"2026-01-07T17:32:53.053035Z","blocks":["rl-c865"],"blocked_by":["rl-mela"]}
{"id":"rl-ho3o","title":"Fix age-based submission to find actual oldest request","description":"CR #7: should_submit() checks self.requests.first() but re-queued requests go to end. Use .iter().min_by_key(|r| r.queued_at) to find actual oldest.","status":"closed","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.188312Z","updated_at":"2026-01-11T00:49:55.639180371Z","closed_at":"2026-01-11T00:49:55.639180371Z","blocks":[],"blocked_by":[]}
{"id":"rl-i927","title":"Implement batch routing in process_session","description":"CR #14: _batch_queue is unused, QueuedForBatch is unreachable. Add token count check (>12K threshold), enqueue large sessions to batch_queue, return QueuedForBatch. Currently batch queue is initialized but never receives items.","status":"open","priority":0,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:22.482519Z","updated_at":"2026-01-10T23:20:02.007722Z","blocks":[],"blocked_by":[]}
{"id":"rl-inrw","title":"Add engram_related MCP tool","description":"Add engram_related tool to MCP server that finds nodes similar to a given node ID","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:40:00.464251Z","updated_at":"2026-01-07T19:58:17.877695Z","closed_at":"2026-01-07T19:58:17.877695Z","blocks":[],"blocked_by":[]}
{"id":"rl-jb2v","title":"CLI commands for project listing and blacklist management","description":"Add CLI commands to manage datasphere projects:\n\n## Commands needed\n\n### `ds projects`\nList all Claude projects discovered in ~/.claude/projects/\n- Show project ID, session count\n- Indicate which are blacklisted\n- Use existing `list_all_projects()` from session.rs\n\n### `ds blacklist` subcommands\n- `ds blacklist` or `ds blacklist list` - show current blacklist\n- `ds blacklist add <project-id>` - add project to blacklist\n- `ds blacklist remove <project-id>` - remove from blacklist\n\n## Context\n- Blacklist file: ~/.datasphere/blacklist (one project ID per line, # for comments)\n- `load_blacklist()` already exists in main.rs\n- `list_all_projects()` already exists in session.rs\n- Project IDs look like: -Users-drazen-playground-ai-omnibus-wm","status":"open","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T20:14:28.745768Z","updated_at":"2026-01-10T20:14:28.745768Z","blocks":[],"blocked_by":[]}
{"id":"rl-jsrv","title":"Handle Claude rate limits in daemon","description":"When LLM returns rate limit error (is_error:true with 'hit your limit' message), detect and back off. Options: exponential backoff, parse reset time from message, or pause daemon until reset. Currently daemon will fail/retry immediately which wastes cycles.","status":"closed","priority":1,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Approach: exponential backoff starting at 1 minute, capped at 1 hour. Progression: 1min → 2min → 4min → 8min → 16min → 32min → 60min. Detect rate limit by checking for 'hit your limit' in LLM response. Reset backoff on success.","created_at":"2026-01-09T08:43:40.479033Z"}],"created_at":"2026-01-09T08:39:29.423638Z","updated_at":"2026-01-09T21:09:42.956205221Z","closed_at":"2026-01-09T21:09:42.956205221Z","blocks":[],"blocked_by":[]}
{"id":"rl-k0e0","title":"Chunked distillation: split large transcripts, distill each chunk, synthesize into one node","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T00:48:49.016487Z","updated_at":"2026-01-07T06:43:12.891911Z","closed_at":"2026-01-07T06:43:12.891911Z","blocks":[],"blocked_by":[]}
{"id":"rl-km2d","title":"Chunked distillation: split large transcripts, distill each chunk, synthesize into one node","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:40:00.316687Z","updated_at":"2026-01-07T19:58:11.561903Z","closed_at":"2026-01-07T19:58:11.561903Z","blocks":[],"blocked_by":[]}
{"id":"rl-l3f9","title":"Explicit reference extraction from content","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Parse content for explicit references (file paths, session IDs, etc). Create edges with weight 1.0 for explicit refs.","created_at":"2026-01-06T19:46:26.636845Z"}],"created_at":"2026-01-06T19:35:34.867531Z","updated_at":"2026-01-07T18:38:18.693864Z","closed_at":"2026-01-07T18:38:18.693864Z","blocks":["rl-oz4k"],"blocked_by":["rl-x4bk"]}
{"id":"rl-ladr","title":"Implement consistent chunking for batch mode","description":"Large sessions should be chunked before queueing for batch processing. Each chunk becomes a separate batch request. Results are aggregated into multiple nodes per session (matching real-time behavior). This ensures: 1) No oversized payloads, 2) Consistent node granularity, 3) Better distillation quality for large sessions.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T19:25:32.990898Z","updated_at":"2026-01-10T19:47:08.419274Z","closed_at":"2026-01-10T19:47:08.419274Z","blocks":["rl-f6u5"],"blocked_by":[]}
{"id":"rl-ljl5","title":"Improve chunk matching to prefer chunk_index over simhash","description":"CR #15: existing_by_simhash can mis-associate on collisions. Prefer matching by chunk_index first (now stored), fallback to simhash for shifted boundaries.","status":"open","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.440365Z","updated_at":"2026-01-10T23:20:02.046535Z","blocks":[],"blocked_by":[]}
{"id":"rl-mela","title":"Session watcher (file change detection)","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T19:35:34.635848Z","updated_at":"2026-01-06T21:44:01.339730Z","closed_at":"2026-01-06T21:41:00.133311Z","blocks":["rl-c865","rl-gley"],"blocked_by":["rl-7m1j"]}
{"id":"rl-mtam","title":"Chunked distillation: split large transcripts, distill each chunk, synthesize into one node","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T14:00:07.312782Z","updated_at":"2026-01-07T17:30:04.578173Z","closed_at":"2026-01-07T17:30:04.578173Z","blocks":[],"blocked_by":[]}
{"id":"rl-nlbm","title":"Remove outdated prompt-caching-2024-07-31 beta header","description":"CR #1: Prompt caching became GA in Dec 2024. Remove beta header, use cache_control field in request body instead.","status":"in_progress","priority":2,"issue_type":"task","session_id":"2757401","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:50.693420Z","updated_at":"2026-01-11T00:25:06.002962948Z","blocks":[],"blocked_by":[]}
{"id":"rl-nw70","title":"Daemon mode: make ds start run in background with stop/status commands","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-08T10:19:14.821363Z","updated_at":"2026-01-08T10:25:28.406320Z","closed_at":"2026-01-08T10:25:28.406320Z","blocks":[],"blocked_by":[]}
{"id":"rl-oz4k","title":"Edge creation and storage","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Closed: edge creation is part of linking tasks (rl-64y9, rl-l3f9), not separate.","created_at":"2026-01-06T19:46:26.864736Z"}],"created_at":"2026-01-06T19:35:34.872156Z","updated_at":"2026-01-06T19:46:26.864737Z","closed_at":"2026-01-06T19:46:26.767466Z","blocks":[],"blocked_by":["rl-64y9","rl-l3f9"]}
{"id":"rl-q2kc","title":"Use tokio::sync::Mutex for BatchQueue to prevent deadlock","description":"CR #4: std::sync::Mutex held across .await in batch poll/submit causes deadlock risk. Replace Arc<Mutex<BatchQueue>> with Arc<tokio::sync::Mutex<BatchQueue>>, change lock sites to .lock().await","status":"in_progress","priority":0,"issue_type":"task","session_id":"2809505","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:22.227178Z","updated_at":"2026-01-11T00:33:50.276974932Z","blocks":[],"blocked_by":[]}
{"id":"rl-qa6n","title":"Drop synthesis, store chunk distillations as separate nodes","description":"Remove synthesis step from large transcript distillation. Each chunk distillation becomes its own node linked to session. Fixes recency bias where later chunks overshadow early foundational decisions.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T17:07:25.837837Z","updated_at":"2026-01-07T17:28:05.451160Z","closed_at":"2026-01-07T17:28:05.451160Z","blocks":[],"blocked_by":[]}
{"id":"rl-qtn5","title":"GA4: Fix deposit detection with high water mark approach","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T20:42:31.158516Z","updated_at":"2026-01-08T20:38:58.780930Z","closed_at":"2026-01-08T20:38:58.780930Z","blocks":[],"blocked_by":[]}
{"id":"rl-r87c","title":"Use Node::with_chunk in batch results processing","description":"CR #17: process_batch_results creates Node::new() but has chunk metadata available. Use Node::with_chunk() and avoid persisting Processed with simhash=0.","status":"in_progress","priority":1,"issue_type":"task","session_id":"2760553","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.530166Z","updated_at":"2026-01-11T00:26:19.245853159Z","blocks":[],"blocked_by":[]}
{"id":"rl-roh8","title":"Basic CRUD for nodes/edges","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T19:35:34.514262Z","updated_at":"2026-01-06T21:55:04.775836Z","closed_at":"2026-01-06T21:55:04.775836Z","blocks":["rl-w094","rl-x4bk"],"blocked_by":["rl-8dqi"]}
{"id":"rl-s1e9","title":"Make TOOL_RESULT and THINKING optional in format_context","description":"TOOL_RESULT (full file contents) and THINKING (verbose reasoning) blow up context size.\n\nMake them optional with FormatOptions struct, disabled by default.\nThis reduces context before chunking -> fewer LLM calls.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T13:52:44.805197Z","updated_at":"2026-01-07T13:59:19.976004Z","closed_at":"2026-01-07T13:59:19.976004Z","blocks":[],"blocked_by":[]}
{"id":"rl-sf5k","title":"Add engram_related MCP tool","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:41:13.737206Z","updated_at":"2026-01-07T19:53:46.530002Z","closed_at":"2026-01-07T19:53:46.530002Z","blocks":[],"blocked_by":[]}
{"id":"rl-sijy","title":"engram start not queuing existing sessions","description":"AllProjectsWatcher only watches for new file events but never scans existing sessions on startup. The doc comment mentions scan_existing() but the method doesn't exist. Need to add initial session scanning to run_start().","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:42:28.415450Z","updated_at":"2026-01-07T19:50:24.061632Z","closed_at":"2026-01-07T19:50:24.061632Z","blocks":[],"blocked_by":[]}
{"id":"rl-t2am","title":"Update distill.rs with DistillMode routing (real-time vs batch)","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T17:51:17.410801Z","updated_at":"2026-01-10T18:02:51.750693Z","closed_at":"2026-01-10T18:02:51.750693Z","blocks":[],"blocked_by":[]}
{"id":"rl-t6u6","title":"Implement SimHash for session change detection","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T08:14:30.816547Z","updated_at":"2026-01-07T09:12:10.725825Z","closed_at":"2026-01-07T09:12:10.725825Z","blocks":[],"blocked_by":[]}
{"id":"rl-tkpl","title":"Add engram related CLI command","description":"engram related <node-id> - lookup node embedding and search for similar nodes at runtime","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:40:00.410480Z","updated_at":"2026-01-07T19:52:30.513960Z","closed_at":"2026-01-07T19:52:30.513960Z","blocks":[],"blocked_by":[]}
{"id":"rl-tpg1","title":"Explore session update handling: track by session_id + timestamp instead of content hash, support node updates when sessions grow","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[{"author":"anonymous","text":"Options to consider:\n1. Track session_id + last_modified_at instead of hash\n2. Store byte offset or message count - only process new content\n3. Create new node versions vs update in place\n4. Delta distillation (only distill new messages since last run)\n5. Full re-distill but update existing node\n\nKey questions: Do we version nodes? Or overwrite? How to handle semantic drift over long sessions?","created_at":"2026-01-07T07:08:29.592242Z"}],"created_at":"2026-01-07T07:08:02.847701Z","updated_at":"2026-01-07T17:31:04.090003Z","closed_at":"2026-01-07T17:31:04.090003Z","blocks":[],"blocked_by":[]}
{"id":"rl-u3w3","title":"Update distill.rs docs to remove stale synthesis mention","description":"CR #11: Module comment mentions 'synthesize into one summary' but implementation does per-chunk distillation with no synthesis step.","status":"open","priority":2,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:50.771135Z","updated_at":"2026-01-10T23:20:02.087531Z","blocks":[],"blocked_by":[]}
{"id":"rl-w094","title":"CLI: engram stats","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T19:35:34.519133Z","updated_at":"2026-01-06T23:01:36.213302Z","closed_at":"2026-01-06T23:01:36.213302Z","blocks":[],"blocked_by":["rl-roh8"]}
{"id":"rl-wzc7","title":"Chunked distillation: split large transcripts, distill each chunk, synthesize into one node","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T17:29:17.141761Z","updated_at":"2026-01-07T17:30:48.965909Z","closed_at":"2026-01-07T17:30:48.965909Z","blocks":[],"blocked_by":[]}
{"id":"rl-x4bk","title":"Distill from transcript","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-06T19:35:34.759432Z","updated_at":"2026-01-07T17:30:35.802648Z","closed_at":"2026-01-07T17:30:35.802648Z","blocks":["rl-64y9","rl-l3f9"],"blocked_by":["rl-dcao","rl-5h21","rl-roh8"]}
{"id":"rl-xae6","title":"Use higher-resolution timestamp for custom_id to prevent collisions","description":"CR #6: Utc::now().timestamp() is seconds-only. Multiple enqueues for same session_id in same second collide. Use nanoseconds or UUID.","status":"open","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.088372Z","updated_at":"2026-01-10T23:20:02.022923Z","blocks":[],"blocked_by":[]}
{"id":"rl-xr26","title":"Fix batch model IDs to match real-time resolver","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-10T18:20:00.162295Z","updated_at":"2026-01-10T18:31:10.010744Z","closed_at":"2026-01-10T18:31:10.010744Z","blocks":[],"blocked_by":[]}
{"id":"rl-y8gk","title":"Remove edge storage (Edge type, edges table, link_node)","description":"","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-07T19:41:13.725940Z","updated_at":"2026-01-07T19:47:00.026464Z","closed_at":"2026-01-07T19:47:00.026464Z","blocks":[],"blocked_by":[]}
{"id":"rl-zw78","title":"Persist batch queue on add() for crash safety","description":"CR #18: BatchQueue::add() only stores in memory. Requests lost on unclean exit before submit(). Call save_state() after add().","status":"open","priority":1,"issue_type":"task","labels":["batch-api"],"comments":[],"created_at":"2026-01-10T23:18:43.631841Z","updated_at":"2026-01-10T23:20:02.068687Z","blocks":[],"blocked_by":[]}
